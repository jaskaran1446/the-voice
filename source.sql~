CREATE TABLE applicant(
	apid INT PRIMARY KEY NOT NULL,
	apname VARCHAR(15) NOT NULL,
	dob DATE NOT NULL,
	apphone INT NOT NULL,
	apadd VARCHAR(25) NOT NULL
	);

CREATE TABLE rshow(
	showid INT PRIMARY KEY NOT NULL,
	showname VARCHAR(10) NOT NULL,
	yr INT NOT NULL
	);

CREATE TABLE applies(
	apid INT NOT NULL,
	showid INT NOT NULL,
	FOREIGN KEY(apid) REFERENCES applicant(apid),
	FOREIGN KEY(showid) REFERENCES rshow(showid)
	);

CREATE TABLE judge(
	jid INT PRIMARY KEY NOT NULL,
	jname VARCHAR(15) NOT NULL,
	jphon INT NOT NULL,
	jadd VARCHAR(25) NOT NULL
);

CREATE TABLE judgedin(
	jid INT NOT NULL,
	showid INT NOT NULL,
	FOREIGN KEY(showid) REFERENCES rshow(showid),
	FOREIGN KEY(jid) REFERENCES judge(jid)
);

CREATE TABLE episode(
	epid INT PRIMARY KEY NOT NULL,
	showid INT NOT NULL,
	FOREIGN KEY(showid) REFERENCES rshow(showid),
	eptype INT NOT NULL,
	epdate DATE NOT NULL,
	eprating INT NOT NULL
);

CREATE TABLE salary(
	postid INT PRIMARY KEY NOT NULL,
	postname VARCHAR(7) NOT NULL,
	salary INT NOT NULL
);

CREATE TABLE staff(
	staffid INT PRIMARY KEY NOT NULL,
	staffname VARCHAR(15) NOT NULL,
	postid int NOT NULL,
	FOREIGN KEY(postid) REFERENCES salary(postid)
);

CREATE TABLE episode_has_staff(
	epid INT NOT NULL,
	staffid INT NOT NULL,
	FOREIGN KEY(epid) REFERENCES episode(epid),
	FOREIGN KEY(staffid) REFERENCES staff(staffid)
);

CREATE TABLE team(
	teamid INT PRIMARY KEY NOT NULL,
	teamname VARCHAR(7) NOT NULL,
	jid INT NOT NULL,
	showid INT NOT NULL,
	FOREIGN KEY(showid) REFERENCES rshow(showid),
	FOREIGN KEY(jid) REFERENCES judge(jid)
);

CREATE TABLE contestant(
	conid INT NOT NULL PRIMARY KEY,
	conname VARCHAR(15) NOT NULL,
	conadd VARCHAR(25) NOT NULL,
	condob DATE NOT NULL,
	teamid INT NOT NULL,
	showid INT NOT NULL,
	elimep INT,
	FOREIGN KEY(elimep) REFERENCES episode(epid),
	FOREIGN KEY(showid) REFERENCES rshow(showid),
	FOREIGN KEY(teamid) REFERENCES team(teamid)
);

CREATE TABLE performs_in(
	conid INT NOT NULL,
	epid INT NOT NULL,
	FOREIGN KEY(epid) REFERENCES episode(epid),
	FOREIGN KEY(conid) REFERENCES contestant(conid)
);

CREATE TABLE audition(
	audid INT PRIMARY KEY NOT NULL,
	epid INT NOT NULL,
	FOREIGN KEY(epid) REFERENCES episode(epid),
	city VARCHAR(10) NOT NULL
);

CREATE TABLE battle(
	winid INT NOT NULL,
	losid INT NOT NULL,
	epid INT NOT NULL,
	FOREIGN KEY(epid) REFERENCES episode(epid),
	FOREIGN KEY(winid) REFERENCES contestant(conid),
	FOREIGN KEY(losid) REFERENCES contestant(conid)
);

CREATE TABLE elimination(
	epid INT NOT NULL,
	FOREIGN KEY(epid) REFERENCES episode(epid),
	elimcon INT NOT NULL,
	FOREIGN KEY(elimcon) REFERENCES contestant(conid)
);

CREATE TABLE people(
	mobno INT PRIMARY KEY NOT NULL
);

CREATE TABLE voted(
	mobno INT NOT NULL,
	conid INT NOT NULL,
	epid INT NOT NULL,
	FOREIGN KEY(epid) REFERENCES episode(epid),
	FOREIGN KEY(conid) REFERENCES contestant(conid),
	FOREIGN KEY(mobno) REFERENCES people(mobno)
);
DESC people;
DESC voted;
DESC elimination;
DESC battle;
DESC audition;
DESC performs_in; 
DESC applicant;
DESC judge;
DESC rshow;
DESC judgedin;
DESC applies;
DESC contestant;
DESC staff;
DESC episode;
DESC episode_has_staff;
DESC team;
DESC salary;
DROP TABLE voted;
DROP TABLE people;
DROP TABLE elimination;
DROP TABLE battle;
DROP TABLE audition;
DROP TABLE performs_in;
DROP TABLE episode_has_staff;
DROP TABLE contestant;
DROP TABLE staff;
DROP TABLE salary;
DROP TABLE team;
DROP TABLE applies;
DROP TABLE judgedin;
DROP TABLE judge;
DROP TABLE applicant;
DROP TABLE episode;
DROP TABLE rshow;
